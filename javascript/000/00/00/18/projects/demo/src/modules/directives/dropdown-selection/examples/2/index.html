<tui-text-area
    #textarea
    tuiDropdownSelectionPosition="word"
    [tuiDropdown]="dropdown"
    [tuiDropdownSelection]="predicate"
    [pseudoFocus]="(driver | async) || null"
    [(ngModel)]="value"
    (keydown.arrowUp)="onArrow($event, 'last')"
    (keydown.arrowDown)="onArrow($event, 'first')"
>
    Type a message
</tui-text-area>
<ng-template #dropdown>
    <tui-data-list
        *ngIf="textarea.nativeFocusableElement"
        class="menu"
        (keydown.escape)="textarea.nativeFocusableElement.focus()"
    >
        <button
            *ngFor="let item of filterItems(textarea.nativeFocusableElement)"
            tuiOption
            (click)="onClick(item.login, textarea.nativeFocusableElement)"
        >
            {{ item.name }}
            <tui-avatar
                size="s"
                [rounded]="true"
                [avatarUrl]="item.avatar"
                [text]="item.name"
            ></tui-avatar>
        </button>
    </tui-data-list>
</ng-template>
